<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Gestión de Materias</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    {% load static %}
    <link rel="stylesheet" href="{% static 'styles/prueba.css' %}">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <h2>Asignar Docente a Materia</h2>
        <form method="GET" action="">
        <div class="mb-3">
            <label for="programa" class="form-label">Programa</label>
            <select name="programa" id="programa" class="form-control" required>
                <option value="">Seleccione un programa</option>
                {% for programa in programas %}
                    <option value="{{ programa.id }}" {% if request.GET.programa == programa.id|stringformat:"s" %}selected{% endif %}>
                        {{ programa.programa }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <div class="mb-3">
            <label for="semestre" class="form-label">Semestre</label>
            <select name="semestre" id="semestre" class="form-control" required>
                <option value="">Seleccione un semestre</option>
                {% for semestre in semestres %}
                    <option value="{{ semestre.id }}" {% if request.GET.semestre == semestre.id|stringformat:"s" %}selected{% endif %}>
                        {{ semestre.semestre }}
                    </option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-dark">Buscar Materias</button>
    </form>

        {% if materias %}
            <h4>Materias disponibles</h4>
            <ul class="list-group">
                {% for materia in materias %}
                    <li class="list-group-item d-flex justify-content-between align-items-center">
                        {{ materia.materia }}
                        <form method="post" action="{% url 'asignar_docente' materia.id %}">
                            {% csrf_token %}
                            <div class="input-group">
                                <input type="text" name="codigo_docente" class="form-control" placeholder="Código del docente" required>
                                <button class="btn btn-success" type="submit">Asignar</button>
                            </div>
                        </form>
                        <a href="{% url 'ver_docentes_asignados' materia.id %}" class="btn btn-secondary btn-sm">Ver asignados</a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}
    </div>
</body>
</html>
